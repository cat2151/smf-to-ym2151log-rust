# smf-to-ym2151log-rust

<p align="left">
  <a href="README.ja.md"><img src="https://img.shields.io/badge/ðŸ‡¯ðŸ‡µ-Japanese-red.svg" alt="Japanese"></a>
  <a href="README.md"><img src="https://img.shields.io/badge/ðŸ‡ºðŸ‡¸-English-blue.svg" alt="English"></a>
  <a href="https://cat2151.github.io/smf-to-ym2151log-rust/"><img src="https://img.shields.io/badge/ðŸ“¦-Library%20Demo-blue.svg" alt="Library Demo"></a>
</p>

Standard MIDI Files (SMF) ã‚’YM2151ãƒ¬ã‚¸ã‚¹ã‚¿æ›¸ãè¾¼ã¿ãƒ­ã‚°ï¼ˆJSONå½¢å¼ï¼‰ã«å¤‰æ›ã—ã¾ã™ã€‚Rustã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

## ç”¨é€”

- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã€ `cat-play-mml` ã‹ã‚‰åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªç”¨ã®Rustãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¯ãƒ¬ãƒ¼ãƒˆã§ã™ï¼ˆåˆ©ç”¨æ–¹å¼1ï¼‰ã€‚
- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ã€`web-ym2151` ã‹ã‚‰åˆ©ç”¨äºˆå®šã§ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ã®WASMãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ï¼ˆåˆ©ç”¨æ–¹å¼2ï¼‰ã€‚

## WIP

- ã¾ã ãƒ‰ãƒ¬ãƒŸã‚’æœ€ä½Žé™ã®JSONã«å¤‰æ›ã§ãã‚‹ç¨‹åº¦ã§ã™ã€‚
- ä»Šå¾Œã‚ˆã‚Šé«˜åº¦ãªå®Ÿè£…ã‚’ã—ã¦ã„ãäºˆå®šã§ã™ã€‚
- ç ´å£Šçš„å¤‰æ›´ã‚’é »ç¹ã«è¡Œã†æƒ³å®šã§ã™ã€‚

## é–¢é€£ã‚µã‚¤ãƒˆ
- [mmlabc-to-smf-rust](https://github.com/cat2151/mmlabc-to-smf-rust) : demoã§åˆ©ç”¨ã—ã¦ã„ã¾ã™

### ç¾åœ¨ã®åˆ¶ç´„

#### ãƒãƒ£ãƒ³ãƒãƒ«å‰²ã‚Šå½“ã¦æˆ¦ç•¥

ç¾åœ¨ã®å®Ÿè£…ã§ã¯ã€**å’ŒéŸ³æ•°ãƒ™ãƒ¼ã‚¹ã®é™çš„ãƒãƒ£ãƒ³ãƒãƒ«å‰²ã‚Šå½“ã¦æˆ¦ç•¥**ã¨**ãƒ‰ãƒ©ãƒ ãƒãƒ£ãƒ³ãƒãƒ«å„ªå…ˆ**ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ï¼š

**1. å’ŒéŸ³æ•°åˆ†æžãƒ•ã‚§ãƒ¼ã‚º**: 
å¤‰æ›å‰ã«ã€MIDIãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†æžã—ã€é‡è¤‡ã™ã‚‹ãƒŽãƒ¼ãƒˆã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½è·¡ã™ã‚‹ã“ã¨ã§å„MIDIãƒãƒ£ãƒ³ãƒãƒ«ã®æœ€å¤§å’ŒéŸ³æ•°ï¼ˆåŒæ™‚ç™ºéŸ³æ•°ï¼‰ã‚’æ¸¬å®šã—ã¾ã™ã€‚

**2. å’ŒéŸ³æ•°ã«åŸºã¥ãé™çš„å‰²ã‚Šå½“ã¦**:
YM2151ãƒãƒ£ãƒ³ãƒãƒ«ï¼ˆ0-7ã€åˆè¨ˆ8ãƒãƒ£ãƒ³ãƒãƒ«ï¼‰ã‚’å„MIDIãƒãƒ£ãƒ³ãƒãƒ«ã®å’ŒéŸ³æ•°è¦æ±‚ã«åŸºã¥ã„ã¦å‰²ã‚Šå½“ã¦ã¾ã™ã€‚
- å’ŒéŸ³æ•°ãŒå¤šã„MIDIãƒãƒ£ãƒ³ãƒãƒ«ã¯è¤‡æ•°ã®YM2151ãƒãƒ£ãƒ³ãƒãƒ«ã‚’å–å¾—
- ä¾‹: MIDI ch0ãŒ3å’ŒéŸ³ã€MIDI ch1ãŒ1å’ŒéŸ³ã‚’å¿…è¦ã¨ã™ã‚‹å ´åˆï¼š
  - MIDI ch0ã¯YM2151 ch0ã€ch1ã€ch2ã‚’å–å¾—ï¼ˆ3ãƒãƒ£ãƒ³ãƒãƒ«ï¼‰
  - MIDI ch1ã¯YM2151 ch3ã‚’å–å¾—ï¼ˆ1ãƒãƒ£ãƒ³ãƒãƒ«ï¼‰
  - YM2151 ch4-ch7ã¯åˆ©ç”¨å¯èƒ½ãªã¾ã¾

**3. ãƒ‰ãƒ©ãƒ ãƒãƒ£ãƒ³ãƒãƒ«å„ªå…ˆã®ä¸¦ã³æ›¿ãˆ**:
åˆæœŸå‰²ã‚Šå½“ã¦ã®å¾Œã€MIDIãƒãƒ£ãƒ³ãƒãƒ«9ï¼ˆGeneral MIDIãƒ‰ãƒ©ãƒ ãƒãƒ£ãƒ³ãƒãƒ«ï¼‰ãŒå­˜åœ¨ã™ã‚‹å ´åˆã€å‰²ã‚Šå½“ã¦ãŒä¸¦ã³æ›¿ãˆã‚‰ã‚Œã¾ã™ï¼š
- MIDIãƒãƒ£ãƒ³ãƒãƒ«9ãŒYM2151ãƒãƒ£ãƒ³ãƒãƒ«0ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†å„ªå…ˆã•ã‚Œã‚‹
- ä»–ã®ãƒãƒ£ãƒ³ãƒãƒ«å‰²ã‚Šå½“ã¦ã¯é©å®œå…¥ã‚Œæ›¿ãˆã‚‰ã‚Œã‚‹
- **ç†ç”±**: ãƒ‰ãƒ©ãƒ ã¯åŒä¸€tickä¸Šã§è¤‡æ•°ã®note onãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒå¤šã„ã€‚YM2151ã¯ãƒãƒ£ãƒ³ãƒãƒ«ã‚’é †æ¬¡å‡¦ç†ã—ã€è¦å®šã®ãƒ¬ã‚¸ã‚¹ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã‚µã‚¤ã‚¯ãƒ«ãŒå¿…è¦ãªãŸã‚ã€ãƒ‰ãƒ©ãƒ ã‚’ãƒãƒ£ãƒ³ãƒãƒ«0ã«å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ã§æœ€åˆã«ç™ºéŸ³ã•ã‚Œã€éŸ³è³ªãŒå‘ä¸Šã™ã‚‹ã€‚

**ãƒœã‚¤ã‚¹ç®¡ç†**:
- MIDIãƒãƒ£ãƒ³ãƒãƒ«ã«è¤‡æ•°ã®YM2151ãƒãƒ£ãƒ³ãƒãƒ«ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ã„ã‚‹å ´åˆï¼ˆå’ŒéŸ³æ•° > 1ï¼‰ã€ãƒŽãƒ¼ãƒˆã¯ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ­ãƒ“ãƒ³æ–¹å¼ã§åˆ†é…ã•ã‚Œã‚‹
- å„note-onã¯å‰²ã‚Šå½“ã¦å†…ã®æ¬¡ã®åˆ©ç”¨å¯èƒ½ãªãƒœã‚¤ã‚¹ã‚’ä½¿ç”¨
- note-offã‚¤ãƒ™ãƒ³ãƒˆã¯ã€ã©ã®ãƒœã‚¤ã‚¹ãŒã©ã®ãƒŽãƒ¼ãƒˆã‚’æ¼”å¥ã—ãŸã‹ã‚’é©åˆ‡ã«è¿½è·¡

**åˆ¶é™äº‹é …**:
- åˆ©ç”¨å¯èƒ½ãªYM2151ãƒãƒ£ãƒ³ãƒãƒ«ã¯åˆè¨ˆ8ã¤
- å…¨MIDIãƒãƒ£ãƒ³ãƒãƒ«ã®åˆè¨ˆå’ŒéŸ³æ•°ãŒ8ã‚’è¶…ãˆã‚‹å ´åˆã€ã‚ªãƒ¼ãƒãƒ¼ãƒ•ãƒ­ãƒ¼ã—ãŸãƒŽãƒ¼ãƒˆã¯æœ€å¾Œã«å‰²ã‚Šå½“ã¦ã‚‰ã‚ŒãŸãƒãƒ£ãƒ³ãƒãƒ«ã‚’ä½¿ç”¨
- å†ç”Ÿä¸­ã®å‹•çš„ãƒœã‚¤ã‚¹ã‚¹ãƒ†ã‚£ãƒ¼ãƒªãƒ³ã‚°ãªã—ï¼ˆã™ã¹ã¦ã®å‰²ã‚Šå½“ã¦ã¯é™çš„/äº‹å‰æ±ºå®šï¼‰

**ã‚¹ã‚³ãƒ¼ãƒ—å¤–**: 
- å†ç”Ÿä¸­ã®å‹•çš„ãƒãƒ£ãƒ³ãƒãƒ«å‰²ã‚Šå½“ã¦
- ãƒœã‚¤ã‚¹ã‚¹ãƒ†ã‚£ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å’ŒéŸ³æ•°èª¿æ•´

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã¯ã€ã‚·ãƒ³ãƒ—ãƒ«ã•ã‚’ä¿ã¤ãŸã‚ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®æ¨™ã«æ²¿ã£ã¦æ„å›³çš„ã«çœç•¥ã•ã‚Œã¦ã„ã¾ã™ã€‚


## æ¦‚è¦

[smf-to-ym2151log](https://github.com/cat2151/smf-to-ym2151log) ã®Rustç‰ˆå®Ÿè£…ã§ã™ã€‚
Standard MIDI Files (SMF) ã‚’YM2151 FMéŸ³æºãƒãƒƒãƒ—ã®ãƒ¬ã‚¸ã‚¹ã‚¿æ›¸ãè¾¼ã¿ãƒ­ã‚°ï¼ˆJSONå½¢å¼ï¼‰ã«å¤‰æ›ã—ã¾ã™ã€‚

## ç‰¹å¾´

- **2ãƒ‘ã‚¹å‡¦ç†ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**:
  - **ãƒ‘ã‚¹A**: MIDIãƒ•ã‚¡ã‚¤ãƒ« â†’ ä¸­é–“ã‚¤ãƒ™ãƒ³ãƒˆJSONï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
  - **ãƒ‘ã‚¹B**: ä¸­é–“ã‚¤ãƒ™ãƒ³ãƒˆ â†’ YM2151ãƒ¬ã‚¸ã‚¹ã‚¿ãƒ­ã‚°JSONï¼ˆæœ€çµ‚å‡ºåŠ›ï¼‰
- **ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒã‚§ãƒ³ã‚¸å¯¾å¿œ**: å¤–éƒ¨JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚«ã‚¹ã‚¿ãƒ YM2151éŸ³è‰²ã‚’èª­ã¿è¾¼ã¿ (MIDIãƒ—ãƒ­ã‚°ãƒ©ãƒ 0-127)
- **WebAssemblyå¯¾å¿œ**: WASMã«ã‚ˆã‚‹Webãƒ–ãƒ©ã‚¦ã‚¶ã§ã®å®Ÿè¡ŒãŒå¯èƒ½ ([WASM_USAGE.md](WASM_USAGE.md)ã‚’å‚ç…§)
- **åž‹å®‰å…¨æ€§**: Rustã®åž‹ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚‹å …ç‰¢æ€§
- **é«˜ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹**: ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã«ã‚ˆã‚‹é«˜é€Ÿå‡¦ç†
- **ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™º**: åŒ…æ‹¬çš„ãªãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã¨çµ±åˆãƒ†ã‚¹ãƒˆ (73 tests)
- **æ¨™æº–å¯¾å¿œ**: SMF Format 0 ãŠã‚ˆã³ Format 1 ã‚’ã‚µãƒãƒ¼ãƒˆ
- **ãƒ©ã‚¤ãƒ–ãƒ©ãƒªAPI**: ä»–ã®Rustãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰åˆ©ç”¨å¯èƒ½ãªä¾¿åˆ©ãªAPI

## ä½¿ã„æ–¹

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/cat2151/smf-to-ym2151log-rust.git
cd smf-to-ym2151log-rust

# ãƒ“ãƒ«ãƒ‰ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cargo install --path .
```

### ã‚³ãƒžãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ä½¿ç”¨

```bash
# MIDIãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›
smf-to-ym2151log-rust song.mid

# å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«:
# - song_events.json  (ãƒ‘ã‚¹A: ãƒ‡ãƒãƒƒã‚°ç”¨ä¸­é–“ã‚¤ãƒ™ãƒ³ãƒˆ)
# - song_ym2151.json  (ãƒ‘ã‚¹B: YM2151ãƒ¬ã‚¸ã‚¹ã‚¿ãƒ­ã‚°)
```

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ä½¿ç”¨

ä»–ã®Rustãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦åˆ©ç”¨ã§ãã¾ã™ï¼š

```toml
# Cargo.toml
[dependencies]
smf-to-ym2151log = { git = "https://github.com/cat2151/smf-to-ym2151log-rust" }
```

è©³ç´°ãªAPIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: `cargo doc --open`

### WebAssemblyï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ï¼‰ã§ã®ä½¿ç”¨

- ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ‡ãƒ¢: https://cat2151.github.io/smf-to-ym2151log-rust/ ã§ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰è©¦ã›ã¾ã™
- ãƒ‡ã‚£ãƒ¬ã‚¤ãƒ“ãƒ–ãƒ©ãƒ¼ãƒˆå°‚ç”¨ãƒ‡ãƒ¢: https://cat2151.github.io/smf-to-ym2151log-rust/delay-vibrato.html ï¼ˆåˆ¥ãƒšãƒ¼ã‚¸ï¼‰

ã“ã®ãƒ‡ãƒ¢ã¯ã€MIDIãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›ã‚’ä¼´ã†æœ€å°é™ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ç”¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

Webãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ä½¿ç”¨ã™ã‚‹ï¼š

```bash
# wasm-packã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cargo install wasm-pack

# WASMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
wasm-pack build --target web --features wasm
```

è©³ç´°ãªä½¿ç”¨æ–¹æ³•ã¨ä¾‹ã«ã¤ã„ã¦ã¯ã€[WASM_USAGE.md](WASM_USAGE.md)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

æœ€å°é™ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ç”¨ãƒ‡ãƒ¢ã¯ä¸Šè¨˜ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ‡ãƒ¢ãƒªãƒ³ã‚¯ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚

### å‡ºåŠ›ä¾‹

```
smf-to-ym2151log-rust
Processing: song.mid

Pass A: Parsing MIDI file...
  âœ“ Successfully parsed MIDI file
  - Ticks per beat: 480
  - Initial tempo: 120.00 BPM
  - Total events: 4

Saving intermediate events JSON...
  âœ“ Saved: song_events.json

Pass B: Converting to YM2151 register log...
  âœ“ Successfully converted to YM2151 log
  - Total YM2151 events: 42

Saving YM2151 log JSON...
  âœ“ Saved: song_ym2151.json

=== CONVERSION COMPLETE ===
```

## ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒã‚§ãƒ³ã‚¸å¯¾å¿œ

ã‚³ãƒ³ãƒãƒ¼ã‚¿ã¯MIDIãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒã‚§ãƒ³ã‚¸ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆ0-127ï¼‰ã«ã‚ˆã‚‹éŸ³è‰²åˆ‡ã‚Šæ›¿ãˆã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒã‚§ãƒ³ã‚¸ã‚¤ãƒ™ãƒ³ãƒˆãŒæ¤œå‡ºã•ã‚Œã‚‹ã¨ã€ã‚³ãƒ³ãƒãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®å‹•ä½œã‚’ã—ã¾ã™ï¼š

1. **å¤–éƒ¨éŸ³è‰²ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢** `tones/{program:03}.json` ï¼ˆä¾‹ï¼šãƒ—ãƒ­ã‚°ãƒ©ãƒ 42ã®å ´åˆã¯ `tones/042.json`ï¼‰
2. **éŸ³è‰²ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦é©ç”¨** ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹å ´åˆ
3. **å†…è”µãƒ‡ãƒ•ã‚©ãƒ«ãƒˆéŸ³è‰²ã‚’ä½¿ç”¨** ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆ

### ã‚«ã‚¹ã‚¿ãƒ éŸ³è‰²ãƒ•ã‚¡ã‚¤ãƒ«

`tones/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã™ã‚‹ã“ã¨ã§ã€ã‚«ã‚¹ã‚¿ãƒ YM2151éŸ³è‰²ã‚’ä½œæˆã§ãã¾ã™ï¼š

```bash
tones/
â”œâ”€â”€ 000.json    # ãƒ—ãƒ­ã‚°ãƒ©ãƒ 0 (ã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã‚°ãƒ©ãƒ³ãƒ‰ãƒ”ã‚¢ãƒŽ)
â”œâ”€â”€ 001.json    # ãƒ—ãƒ­ã‚°ãƒ©ãƒ 1 (ãƒ–ãƒ©ã‚¤ãƒˆã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚¯ãƒ”ã‚¢ãƒŽ)
â”œâ”€â”€ ...
â””â”€â”€ 127.json    # ãƒ—ãƒ­ã‚°ãƒ©ãƒ 127 (ã‚¬ãƒ³ã‚·ãƒ§ãƒƒãƒˆ)
```

å„éŸ³è‰²ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€FMåˆæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹ãŸã‚ã®YM2151ãƒ¬ã‚¸ã‚¹ã‚¿æ›¸ãè¾¼ã¿ã‚’å®šç¾©ã—ã¾ã™ã€‚è©³ç´°ãªãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ä¾‹ã«ã¤ã„ã¦ã¯ã€[`tones/README.md`](tones/README.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ä½¿ç”¨ä¾‹

```bash
# 1. MIDIãƒ—ãƒ­ã‚°ãƒ©ãƒ 42ç”¨ã®ã‚«ã‚¹ã‚¿ãƒ éŸ³è‰²ã‚’ä½œæˆ
#    ï¼ˆä¾‹ï¼šãƒ–ãƒ©ã‚¹éŸ³ï¼‰
cat > tones/042.json << EOF
{
  "events": [
    { "time": 0.0, "addr": "0x20", "data": "0xC7" },
    { "time": 0.0, "addr": "0x38", "data": "0x00" },
    ...
  ]
}
EOF

# 2. ãƒ—ãƒ­ã‚°ãƒ©ãƒ 42ã‚’ä½¿ç”¨ã™ã‚‹MIDIãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›
smf-to-ym2151log-rust song.mid

# ã‚³ãƒ³ãƒãƒ¼ã‚¿ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒã‚§ãƒ³ã‚¸ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ 42ãŒ
# æŒ‡å®šã•ã‚Œã‚‹ã¨è‡ªå‹•çš„ã« tones/042.json ã‚’ä½¿ç”¨ã—ã¾ã™
```

## é–‹ç™º

### å‰ææ¡ä»¶
- Rust 1.70.0 ä»¥ä¸Š
- Cargo

### ãƒ“ãƒ«ãƒ‰ (Build)
```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰
cargo build

# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
cargo build --release
```

### ãƒ†ã‚¹ãƒˆ
```bash
# ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
cargo test

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
cargo test midi_parser

# ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
cargo tarpaulin --out Html
```

### ã‚³ãƒ¼ãƒ‰å“è³ª (Code Quality)
```bash
# ãƒ•ã‚©ãƒ¼ãƒžãƒƒãƒˆãƒã‚§ãƒƒã‚¯
cargo fmt --check

# lintãƒã‚§ãƒƒã‚¯
cargo clippy -- -D warnings

# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
cargo audit
```
