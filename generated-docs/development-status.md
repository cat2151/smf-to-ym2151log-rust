Last updated: 2025-11-28

# Development Status

## 現在のIssues
- 現在オープン中の主なissueは、`ym2151-tone-editor`からのトーン定義を優先的に読み込む機能追加の検討 `[Issue #33](../issue-notes/33.md)`です。
- これに関連して、`ym2151-tone-editor`を用いて`tones/000.json`から`127.json`を実際に作成・配置する作業 `[Issue #22](../issue-notes/22.md)`も未着手です。
- これらのissueは、アプリケーションが利用する音色定義の柔軟性と更新性を向上させることに焦点を当てています。

## 次の一手候補
1.  [Issue #33](../issue-notes/33.md): `ym2151-tone-editor`出力のJSONを優先して読み込むロジックを実装する
    -   最初の小さな一歩: 現在のトーンファイル読み込みロジック（`src/ym2151/converter.rs`や`src/ym2151/mod.rs`を想定）を特定し、外部ディレクトリからの読み込みパスを考慮するための設計を検討する。
    -   Agent実行プロンプ:
        ```
        対象ファイル: `src/ym2151/converter.rs`, `src/ym2151/mod.rs`, `src/ym2151/tone.rs`

        実行内容: `ym2151-tone-editor`が出力するGM000 variations format JSONファイル（仮に`ym2151-editor-tones/000.json`のようなパスで提供されると想定）を、既存の`tones/`ディレクトリよりも優先して読み込むための変更点を分析してください。具体的には、トーンファイルパスの解決ロジックをどこに、どのように追加・変更すべきか、ファイルシステム操作（シンボリックリンクの検出など）をどのように扱うべきかを検討し、主要な関数の変更点概要を提示してください。

        確認事項:
        - 既存のトーン読み込み処理がどこで行われているか。
        - 優先順位付けのロジックを既存コードにどのように組み込むか。
        - ファイルシステム操作に必要な権限や依存ライブラリの有無。
        - シンボリックリンクを考慮したパス解決の安全性。

        期待する出力:
        `ym2151-tone-editor`からのトーンファイルを優先的に読み込むための設計案をMarkdown形式で出力してください。これには、変更対象となるファイルと関数、新しい読み込み順序のロジック、および仮説としてシンボリックリンク検出のための考慮事項を含めてください。
        ```

2.  [Issue #22](../issue-notes/22.md): `ym2151-tone-editor`でGM000 variations formatのダミートーンファイルを複数作成し、`tones/`ディレクトリに配置する
    -   最初の小さな一歩: `ym2151-tone-editor`の出力仕様を再確認し、既存の`tones/000.json`の内容と比較して、必要なフィールドや構造の差異を洗い出す。その後、最低限のダミートーンファイル（例: `tones/001.json`）を1つ作成する。
    -   Agent実行プロンプ:
        ```
        対象ファイル: `tones/000.json` (既存のトーンファイル), および`ym2151-tone-editor`が出力すると想定されるJSONの構造に関する情報（もしあれば）

        実行内容: `ym2151-tone-editor`が生成するGM000 variations formatのJSONファイルの想定される構造と、現在の`tones/000.json`の構造を比較し、主な違いを洗い出してください。その後、`ym2151-tone-editor`によって生成されるダミートーンファイル`tones/001.json`の具体的な内容例をJSON形式で作成してください。このダミートーンファイルは、最小限の有効なYM2151レジスタ設定を含み、後続のテストで利用できることを想定します。

        確認事項:
        - `ym2151-tone-editor`の具体的な出力形式に関するドキュメントや例。
        - YM2151レジスタ設定の基本構造。
        - 現在の`tones/000.json`のフォーマットが、どのようなイベントを表現しているか。

        期待する出力:
        - `ym2151-tone-editor`出力と現在の`tones/000.json`の構造比較をMarkdown形式で記述。
        - `tones/001.json`として保存可能な、GM000 variations formatに準拠したダミートーンファイルのJSON内容。
        ```

3.  [Issue #33](../issue-notes/33.md): 新しいトーン読み込みロジックを検証するためのユニットテストを追加する
    -   最初の小さな一歩: 既存のテストスイート（`tests/integration_tests.rs`など）をレビューし、トーンファイルの読み込みに関するテストケースが存在するかを確認する。もしなければ、簡単なトーンファイルの読み込み成功を検証する基本的なテストケースのスケルトンを作成する。
    -   Agent実行プロンプ:
        ```
        対象ファイル: `src/ym2151/mod.rs`, `src/ym2151/converter.rs`, `tests/integration_tests.rs`

        実行内容: `[Issue #33](../issue-notes/33.md)`で検討している「`ym2151-tone-editor`出力のJSONを優先して読み込む」という新しい仕様を検証するための、新しいユニットテストの設計を考案してください。具体的には、
        1) `ym2151-editor-tones/`のような仮想ディレクトリに配置されたダミートーンファイルを読み込むテストケース
        2) 既存の`tones/`ディレクトリのファイルよりも優先されることを確認するテストケース
        これらを実現するためのテスト構造と、アサートすべき内容の概要をMarkdown形式で記述してください。

        確認事項:
        - テストハーネスの利用方法 (`cargo test`)。
        - ファイルシステムをシミュレートする方法（もし必要であれば）。
        - 既存のテストコードとの整合性。
        - トーンファイルの読み込み結果をどのように検証するか。

        期待する出力:
        新しいトーン読み込みロジックを検証するための、Rustのユニットテストコードの骨子をMarkdown形式で出力してください。テストケースの名前、基本的なセットアップ、および期待されるアサートの内容を含めてください。

---
Generated at: 2025-11-28 07:07:15 JST
